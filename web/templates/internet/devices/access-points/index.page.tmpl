{{template "shared/base.layout.tmpl" .}}

{{define "title"}}Access points | {{.Data.Interface}} | Devices | Internet Access {{end}}
{{define "description"}}View available access points for device {{.Data.Interface}}{{end}}
{{define "mode"}}advanced{{end}}

{{define "content"}}
  {{$internetPagePath := print (dir (dir (dir .Meta.Path))) "?mode=advanced"}}

  <main class="main-container" tabindex="-1" data-controller="default-scrollable">
    <nav class="breadcrumb main-breadcrumb" aria-label="breadcrumbs">
      <ul>
        <li><a href="{{.Meta.BasePath}}?mode=advanced">Admin</a></li>
        <li><a href="{{$internetPagePath}}" aria-current="page">Internet</a></li>
        <li><a href="{{$internetPagePath}}#wifi-devices" aria-current="page">Devices</a></li>
        <li><a href="{{$internetPagePath}}#device-{{.Data.Interface}}" aria-current="page">{{.Data.Interface}}</a></li>
        <li class="is-active"><a href="{{.Meta.Path}}" aria-current="page">Access points</a></li>
      </ul>
    </nav>

    <section class="section content">
      <h1>Access points for {{.Data.Interface}}</h1>
      <turbo-frame id="{{.Meta.BasePath}}internet/devices/{{.Data.Interface}}/access-points">
        <form
          action="{{.Meta.BasePath}}internet/devices/{{.Data.Interface}}/access-points"
          method="POST"
          data-controller="form-submission"
          data-action="submit->form-submission#submit"
          class="mt-4 mb-3"
        >
          <input type="hidden" name="state" value="refreshed">
          <input type="hidden" name="redirect-target" value="{{.Meta.Path}}">
          <div class="field">
            <div class="control" data-form-submission-target="submitter">
              <input
                class="button is-primary"
                type="submit"
                value="Rescan"
                data-form-submission-target="submit"
              >
            </div>
          </div>
        </form>
        <div class="table-container block mb-5">
          {{
            template "internet/devices/access-points/table.partial.tmpl" dict
            "AvailableSSIDs" .Data.AvailableSSIDs
            "AvailableAPs" .Data.AvailableAPs
          }}
        </div>
      </turbo-frame>
    </section>
  </main>
{{end}}
